#!/usr/bin/env bash

# Summary: Runs an rbenv executable via sudo.
#
# Usage: rbenv sudo
#
# This will run an executable that is not 'managed' by rbenv.
# For instance, given that echo is not within the scope of rbenv, this would be expected to fail:
#    $rbenv sudo echo 'Hi!'
# However, this plugin intercepts the command and runs it as would expect:
#    $sudo echo 'Hi!'


EXECUTABLE=$1
shift 1
RBENV_EXECUTABLE=$(rbenv which $EXECUTABLE)
if [ $? -eq 0 ]; then
  sudo $RBENV_EXECUTABLE $*
else
  sudo $EXECUTABLE $*
fi
